<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
    <div class="container">
        <header>
            <h1>We Value Your Feedback</h1>
            <p class="subtitle">Help us improve your experience at Better Southgate Leisure Centre</p>
        </header>

        <% if (success) { %>
            <div class="success-message">
                <h2>Thank You! üéâ</h2>
                <p><%= success %></p>
                <p class="small-text">Your feedback helps us serve you better.</p>
                <a href="/" class="back-btn">Submit Another Feedback</a>
            </div>
        <% } else { %>
            <form action="/submit-feedback" method="POST" class="feedback-form">
                
                <div class="form-section">
                    <h2>Your Visit</h2>
                    
                    <div class="form-group">
                        <label for="activity">What did you do today? <span class="required">*</span></label>
                        <select id="activity" name="activity" required>
                            <option value="">Select an activity...</option>
                            <option value="Fitness Class">Fitness Class</option>
                            <option value="Swim for Fitness">Swim for Fitness</option>
                            <option value="Swim for All">Swim for All</option>
                            <option value="Gym">Gym</option>
                            <option value="Table Tennis">Table Tennis</option>
                            <option value="Health Suite">Sauna & Steam</option>
                            <option value="Cafe">Cafe</option>
                            <option value="Multiple Activities">Multiple Activities</option>
                        </select>
                        <small class="help-text">If you select Fitness Class, please mention which class and time in comments</small>
                    </div>

                    <div class="form-group">
                        <label>How was your experience? <span class="required">*</span></label>
                        <div class="emoji-rating-wrapper">
                            <div class="emoji-rating-container">
                                <input type="radio" id="sad" name="rating" value="1" required>
                                <label for="sad" class="emoji-option sad-face">
                                    <span class="emoji">üòû</span>
                                    <span class="emoji-label">Poor</span>
                                </label>
                                
                                <input type="radio" id="neutral" name="rating" value="3">
                                <label for="neutral" class="emoji-option neutral-face">
                                    <span class="emoji">üòê</span>
                                    <span class="emoji-label">Okay</span>
                                </label>
                                
                                <input type="radio" id="happy" name="rating" value="5">
                                <label for="happy" class="emoji-option happy-face">
                                    <span class="emoji">üòä</span>
                                    <span class="emoji-label">Great</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="comments">Tell us more <span class="required">*</span></label>
                        <textarea id="comments" name="comments" rows="5" required 
                                  placeholder="Share your experience, suggestions, or any comments..."></textarea>
                        <small class="help-text char-count"><span id="charCount">0</span> characters</small>
                    </div>
                </div>

                <div class="form-section optional-section">
                    <h2>Contact Details <span class="optional-badge">Optional</span></h2>
                    <p class="small-text">Help us follow up with you (completely optional)</p>
                    
                    <div class="form-group">
                        <label for="name">Your Name</label>
                        <input type="text" id="name" name="name" placeholder="Enter your name">
                    </div>

                    <div class="form-group">
                        <label for="email">Your Email</label>
                        <input type="email" id="email" name="email" placeholder="your.email@example.com">
                    </div>

                    <div class="form-group">
                        <label for="betterId">Better Membership ID</label>
                        <input type="text" id="betterId" name="betterId" placeholder="Enter your membership ID">
                    </div>
                </div>

                <div class="form-section consent-section">
                    <div class="consent-group">
                        <input type="checkbox" id="consent" name="consent" required>
                        <label for="consent">
                            I understand my feedback will be reviewed by Better GLL Southgate staff to improve services. 
                            <a href="/privacy" target="_blank">Privacy Policy</a>
                            <span class="required">*</span>
                        </label>
                    </div>
                </div>

                <% if (error) { %>
                    <div class="error-message">
                        <%= error %>
                    </div>
                <% } %>

                <button type="submit" class="submit-btn">Submit Feedback</button>
                
                <p class="required-note"><span class="required">*</span> Required fields</p>
            </form>
        <% } %>

        <footer>
            <p>&copy; 2025 Southgate Leisure Centre</p>
            <p><a href="/privacy">Privacy Policy</a></p>
        </footer>
    </div>

    <script>
        const textarea = document.getElementById('comments');
        const charCount = document.getElementById('charCount');
        
        if (textarea && charCount) {
            textarea.addEventListener('input', function() {
                charCount.textContent = this.value.length;
            });
        }
    </script>
</body>
</html>